# Financial Research Skill

通用金融研究skill,支持公司研究、行业研究、策略研究、宏观研究和量化分析。

## 功能特点

### 1. 全面的研究类型支持
- **公司研究**: 深度公司分析,超越简单的一页纸报告
- **行业研究**: 市场结构、竞争格局、行业趋势
- **策略研究**: 投资主题、板块轮动、组合构建
- **宏观研究**: 经济指标、政策分析、市场影响
- **量化分析**: 财务指标对比、估值建模、绩效分析

### 2. 智能规划框架
- 根据研究需求自动制定详细的检索计划
- 优化串行和并行执行策略
- 最大化MCP工具的检索效率
- 目标执行时间: 2-8分钟(取决于复杂度)

### 3. 高效并行检索
- 利用4种MCP工具: finance_db, stock_db, user_db, web
- 智能分phase执行,最大化并行度
- 通常2-3个phase完成整个研究
- 每个phase内10-20个并行任务

### 4. 结构化输出
- 根据研究类型自动适配报告结构
- 包含量化数据和具体证据
- 保存最终报告和生成日志
- 支持中英文输出

## 使用方式

skill会在以下情况自动触发:

### 示例请求
- "研究新能源汽车行业的竞争格局和发展趋势"
- "深度分析特斯拉的业务模式和盈利能力"
- "对比英伟达和AMD在AI芯片领域的竞争优势"
- "分析2024年美联储政策对A股市场的影响"
- "制定一个聚焦AI主题的投资组合策略"
- "量化分析茅台和五粮液的估值差异"
- "宏观经济视角下的2025年港股市场展望"

## Skill工作流程

### 1. 理解需求
- 识别研究类型
- 提取关键参数(目标实体、时间范围等)
- 必要时向用户澄清

### 2. 阅读参考文档
- `references/mcp_tools.md`: MCP工具文档
- `references/research_workflows.md`: 各研究类型的workflow模板
- `references/planning_guide.md`: 规划和优化指南

### 3. 制定研究计划
- 列出所有需要的信息
- 映射到具体的MCP查询
- 识别依赖关系
- 分组为并行phases
- 向用户展示计划并获得批准

### 4. 执行研究计划
- 按phase顺序执行
- 每个phase内所有任务并行
- 使用subagents执行检索和分析
- 实时反馈进度

### 5. 综合与分析
- 整合所有findings
- 交叉验证
- 填补数据缺口
- 质量检查

### 6. 生成最终报告
- 根据研究类型结构化输出
- 保存报告和生成日志
- 文件命名: `[Topic]_[ResearchType]_YYYYMMDD_HHMMSS.md`

## 输出文件

每次研究完成后,所有生成的文件都会保存在 `output/` 目录下,按时间戳组织的子目录中:

```
output/
└── YYYYMMDD_HHMMSS/
    ├── report.md                    # 最终研究报告
    ├── generation_log.md            # 生成过程日志
    ├── retrieval_metadata.json      # 检索元数据
    └── plan.json                    # 执行计划JSON
```

### 文件说明

1. **report.md** - 最终研究报告
   - 根据研究类型自动适配的结构化内容
   - 包含量化数据和具体证据
   - 支持中英文输出

2. **generation_log.md** - 生成过程日志
   - 记录完整的研究过程
   - 包含所有检索查询和结果
   - 便于审计和问题排查

3. **retrieval_metadata.json** - 检索元数据
   - 追踪所有检索到的数据源
   - 详细信息请见下文"检索元数据追踪"部分

4. **plan.json** - 执行计划
   - 保存完整的研究计划JSON
   - 包含所有phases和tasks
   - 用于性能分析和流程优化

### 检索元数据追踪

`retrieval_metadata.json` 文件提供了完整的数据溯源能力,追踪以下信息:

- **文件标识符** (file_id): 每个检索文档的唯一ID
- **标题和日期**: 文档的标题和发布日期
- **来源信息**: 数据源类型、机构名称、公司名称
- **任务关联**: 记录哪个研究任务检索了哪些文件
- **查询字符串**: 保存使用的具体查询语句
- **数据源统计**: 按来源类型汇总的统计信息

**检索元数据的价值:**
- ✅ **完全可追溯**: 报告中的每个数据点都可以追溯到原始来源
- ✅ **质量审计**: 评估数据源的多样性和权威性
- ✅ **合规性**: 满足金融研究的引用和归属要求
- ✅ **可复现性**: 记录完整的检索路径,支持研究复现
- ✅ **持续改进**: 分析检索效果,优化未来的查询策略

## 与其他Skills的关系

- **company-one-page skill**: 专门用于快速生成标准化的5-section公司一页纸
  - 触发词: "生成XX公司一页纸"

- **financial-research skill** (本skill): 用于所有其他金融研究需求
  - 灵活的分析结构
  - 自定义研究深度
  - 超越一页纸的深度调研

两个skills互补,不重叠。

## 技术架构

### 核心组件

1. **SKILL.md**: 主要工作流程和指导
2. **references/mcp_tools.md**: 4种MCP工具的完整文档
   - `info_search_finance_db`: 搜索研报、公告、新闻
   - `info_search_stock_db`: 查询量化财务数据
   - `info_search_user_db`: 搜索用户上传文档
   - `info_search_web`: Web搜索fallback
3. **references/research_workflows.md**: 6种研究类型的workflow模板
4. **references/planning_guide.md**: 优化规划的最佳实践

### 性能目标

| 复杂度 | Sections | 预计时间 |
|--------|----------|----------|
| 简单 | 3-5 | ~2-3分钟 |
| 中等 | 5-8 | ~3-5分钟 |
| 复杂 | 10+ | ~5-8分钟 |

### 优化策略

1. **积极并行化**: 默认并行,除非有明确依赖
2. **最小化phases**: 目标2-3个phases
3. **合理的recall_num**: 8-15通常足够
4. **数据复用**: 相同数据只检索一次

## 质量标准

所有研究报告都应:
- ✅ 包含具体的量化数据(数字、百分比、日期)
- ✅ 引用数据来源和时间
- ✅ 使用"-"标记缺失数据
- ✅ 保持逻辑连贯性
- ✅ 无占位符文本
- ✅ 包含风险分析
- ✅ 提供可操作的建议(如适用)

## 文件清单

```
financial-research/
├── SKILL.md                          # 主要工作流程(298行)
└── references/
    ├── mcp_tools.md                  # MCP工具完整文档(包含使用示例)
    ├── research_workflows.md         # 6种研究类型的详细templates
    └── planning_guide.md             # 规划优化指南和最佳实践
```

## 创建日期

2026-02-06

## 版本

v1.0

---

*这个skill通过智能规划和并行执行,高效地提供高质量的金融研究报告。*
